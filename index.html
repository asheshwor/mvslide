<!DOCTYPE html>
<html>
<head>
	<meta charset='utf-8'>
	<title>Visualizing international migration flows</title>
	<meta name="description" content="Visualizing international migration flows">
	<meta name="author" content="asheshwor">
	<meta name="generator" content="slidify" />
	
	<!-- LOAD STYLE SHEETS -->
	<link rel="stylesheet" href="libraries/frameworks/html5slides/default/styles.css">
	<link rel="stylesheet" href="libraries/highlighters/highlight.js/css/monokai.css" />  <link rel="stylesheet" href = "assets/css/ribbons.css">
  
</head>
<body style='display: none'>
	<section class='slides layout-regular template-regular'>
     <article class="" id="slide-1" style="background:;">
  <h3>1 | Shiny app pitch introduction</h3>
  <p><strong>Visualizing international migration flows using UN migrants stock data</strong></p>

<p>This is for visualizing international migration flows to and from a selected region using <strong>UN migrants stock data</strong>.</p>

<p>Colors to visualize direction of movement, and number of arcs to visualize size of movement.</p>

<p>It&#39;s very easy to use, just select the region, theme, year to
update the output. <strong>That&#39;s it!</strong></p>

<p><strong>Try it live at</strong> <a href="https://asheshwor.shinyapps.io/migrationviz/">https://asheshwor.shinyapps.io/migrationviz/</a></p>

<p><center><img src="pictures/screenshot.jpg" alt="App screenshot">
<small>Screenshot of options</small></center></p>

</article>

<article class="class" id="id" style="background:#F0F0F0;">
  <h3>2 | Source of data</h3>
  <p>Reading migration data from excel file:</p>

<pre><code class="r">dataloc &lt;- &quot;data/UN_MigrantStockByOriginAndDestination_2013.xls&quot;
readMigrationTable &lt;- function() {
    data &lt;- read.xlsx2(dataloc, sheetName = sheetName, startRow = 16,
                       colIndex = c(2, 4 , 10:241),
                       colClasses = c(&quot;character&quot;, rep(&quot;numeric&quot;, 232))) #read excel sheet selected columns and rows
    return(data)
  }
</code></pre>

<p>Reading world map shape file and cities database:</p>

<pre><code class="r">  # read world shapefile downloaded from NaturalEarthData.com
  wmap &lt;- readShapeSpatial(&quot;data/110m_cultural/ne_110m_admin_0_countries.shp&quot;)
  # read cities database downloaded from geonames.org
  places &lt;- read.csv(&quot;data/cities1000.csv&quot;, header=FALSE, stringsAsFactors=FALSE)
</code></pre>

</article>

<article class="class" id="id" style="background:#F0F0F0;">
  <h3>3 | Data processing</h3>
  <p>With some processing, a data-frame with all computed connections is created. Following is an example for Australia:</p>

<pre><code>##   source destination stock lat.d lon.d lat.s lon.s stocklog id
## 1     AD          AU    22   -27   133  42.5   1.5        3  1
## 2     AD          AU    22   -27   133  42.5   1.5        3  1
## 3     AD          AU    22   -27   133  42.5   1.5        3  1
## 4     AE          AU  5890   -27   133  24.0  54.0        9  2
## 5     AE          AU  5890   -27   133  24.0  54.0        9  2
</code></pre>

<pre><code>##      source destination stock lat.d lon.d lat.s lon.s stocklog  id
## 2359     ZW          AU 34034   -27   133   -20    30       10 349
## 2360     ZW          AU 34034   -27   133   -20    30       10 349
## 2361     ZW          AU 34034   -27   133   -20    30       10 349
## 2362     ZW          AU 34034   -27   133   -20    30       10 349
## 2363     ZW          AU 34034   -27   133   -20    30       10 349
</code></pre>

<p>In the next step, the repeating coordinates are replaced with locations of cities in the region.</p>

</article>

<article class="class" id="id" style="background:#F0F0F0;">
  <h3>4 | Selecting origin and destination points</h3>
  <p>To select the location, the data is sorted by location and the <code>getRandomCity</code> function retrieves a data-frame with the specified number of cities in the selected region with probability of selection based on population.</p>

<pre><code class="r">sample(c(1:nrow(allCities)), num, replace=TRUE, prob=allCities$pop)
</code></pre>

<p><center><img src="pictures/australia.jpg" alt="More populated cities are more likely to get selected"></center>
<center><small>Cities with higher population are more likely to get selected</small></center></p>

</article>

<article class="class" id="id" style="background:#F0F0F0;">
  <h3>5 | Generating the final map</h3>
  <p>Finally the arc segments from obtained using <code>gcIntermediate</code> function are and plotted using <code>ggplot2</code>.</p>

<p><img src="assets/fig/final-plot.png" title="plot of chunk final-plot" alt="plot of chunk final-plot" style="display: block; margin: auto;" /></p>

<p><center><small>An example plot for Australia with &#39;light&#39; map theme</small></center></p>

<p>Try it yourself at <a href="https://asheshwor.shinyapps.io/migrationviz/">https://asheshwor.shinyapps.io/migrationviz/</a></p>

<p><strong>Thank you!</strong></p>

</article>

  </section>
</body>
  <!-- LOAD JAVASCRIPTS  -->
	<script src='libraries/frameworks/html5slides/default/slides.js'></script>
	<!-- LOAD HIGHLIGHTER JS FILES -->
	<script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>
	<!-- DONE LOADING HIGHLIGHTER JS FILES -->
	 
	</html>
